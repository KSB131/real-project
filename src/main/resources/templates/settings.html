<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head><title>설정</title></head>
<body>
    <div layout:fragment="content">
        <div>
            <h2 class="page-title">설정</h2>
            <p class="page-description">시스템 및 알림 설정</p>
        </div>

        <!-- 알림 설정 -->
        <div class="card">
            <h3 class="card-title">🔔 알림 설정</h3>
            <div class="settings-list">
                <div class="setting-item">
                    <div>
                        <div class="setting-title">앱 푸시 알림</div>
                        <div class="setting-desc">모바일 알림 수신</div>
                    </div>
                    <div class="toggle-switch active" onclick="this.classList.toggle('active')">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="setting-item">
                    <div>
                        <div class="setting-title">알람음</div>
                        <div class="setting-desc">위험 알림 시 소리</div>
                    </div>
                    <div class="toggle-switch active" onclick="this.classList.toggle('active')">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="setting-item">
                    <div>
                        <div class="setting-title">야간 모드</div>
                        <div class="setting-desc">22:00 ~ 06:00 음량 감소</div>
                    </div>
                    <div class="toggle-switch active" onclick="this.classList.toggle('active')">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 임계값 설정 -->
        <div class="card">
            <h3 class="card-title">⏱️ 임계값 설정</h3>
            <form th:action="@{/settings}" method="post">
                <div class="settings-grid">
                    <div class="form-group">
                        <label class="input-label">주의 알림 (분)</label>
                        <input type="number" name="warningThreshold" class="input-field" 
                               th:value="${settings?.warningThreshold}" value="90" placeholder="90">
                    </div>
                    <div class="form-group">
                        <label class="input-label">위험 알림 (분)</label>
                        <input type="number" name="dangerThreshold" class="input-field" 
                               th:value="${settings?.dangerThreshold}" value="120" placeholder="120">
                    </div>
                    <div class="form-group">
                        <label class="input-label">알림 재발송 간격 (분)</label>
                        <input type="number" name="resendInterval" class="input-field" 
                               th:value="${settings?.resendInterval}" value="10" placeholder="10">
                    </div>
                    <div class="form-group">
                        <label class="input-label">에스컬레이션 시간 (분)</label>
                        <input type="number" name="escalationTime" class="input-field" 
                               th:value="${settings?.escalationTime}" value="10" placeholder="10">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width:auto; padding:0 24px; margin-top:16px;">설정 저장</button>
            </form>
        </div>

        <!-- 시스템 상태 -->
        <div class="card">
            <h3 class="card-title">🖥️ 시스템 상태</h3>
            <div class="settings-list">
                <div class="setting-item">
                    <span>서버 연결</span>
                    <span class="connection-dot connection-dot-green"></span>
                </div>
                <div class="setting-item">
                    <span>데이터베이스</span>
                    <span class="connection-dot connection-dot-green"></span>
                </div>
                <div class="setting-item">
                    <span>카메라 디바이스 (24대)</span>
                    <div style="display:flex; align-items:center; gap:8px;">
                        <span style="font-size:14px; color:#a16207;">2대 연결 끊김</span>
                        <span class="connection-dot connection-dot-yellow"></span>
                    </div>
                </div>
                <div class="setting-item">
                    <span>AI 모델 서버</span>
                    <span class="connection-dot connection-dot-green"></span>
                </div>
            </div>
        </div>

        <!-- 개인정보 -->
        <div class="card">
            <h3 class="card-title">🔒 개인정보 및 보안</h3>
            <div style="font-size:14px; color:#4b5563;">
                <p style="margin-bottom:8px;">• 환자 데이터는 암호화되어 저장됩니다</p>
                <p style="margin-bottom:8px;">• 데이터 수집 전 환자 동의가 필요합니다</p>
                <p>• 접근 권한은 역할에 따라 제한됩니다</p>
            </div>
            <button class="btn btn-small" style="margin-top:16px;">개인정보 처리방침 보기</button>
        </div>
    </div>
</body>
</html>
